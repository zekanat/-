<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Расписание фитнес‑клуба</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h2 { margin-top: 30px; }
    form { margin-bottom: 20px; padding: 10px; border: 1px solid #ccc; }
    label { display: block; margin-top: 5px; }
    input, select { margin-top: 3px; padding: 4px; width: 100%; max-width: 300px; }
    table { border-collapse: collapse; margin-top: 10px; width: 100%; max-width: 900px; }
    th, td { border: 1px solid #ccc; padding: 4px 8px; text-align: left; }
    .logout { color: red; font-weight: bold; margin-left: 20px; }
  </style>
</head>
<body>

<h1>Информационная система расписания фитнес‑клуба <a href="/logout" class="logout">Выйти</a></h1>
<p>Через эту страницу можно добавлять тренеров, залы, типы занятий, клиентов и занятия.</p>

<hr>

<h2>Добавить тренера</h2>
<form action="/web/add_trainer" method="post">
  <label>Имя тренера:
    <input type="text" name="name" required>
  </label>
  <label>Специализация:
    <input type="text" name="specialization">
  </label>
  <button type="submit">Сохранить тренера</button>
</form>

<table>
  <thead>
    <tr>
      <th>ID</th><th>Имя</th><th>Специализация</th><th>Макс. занятий в день</th>
    </tr>
  </thead>
  <tbody>
  {% for t in trainers %}
    <tr>
      <td>{{ t.id }}</td>
      <td>{{ t.name }}</td>
      <td>{{ t.specialization }}</td>
      <td>{{ t.max_classes_per_day }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<hr>

<h2>Добавить зал</h2>
<form action="/web/add_room" method="post">
  <label>Название зала:
    <input type="text" name="name" required>
  </label>
  <label>Вместимость:
    <input type="number" name="capacity" value="20" min="1">
  </label>
  <button type="submit">Сохранить зал</button>
</form>

<table>
  <thead>
    <tr>
      <th>ID</th><th>Название</th><th>Вместимость</th>
    </tr>
  </thead>
  <tbody>
  {% for r in rooms %}
    <tr>
      <td>{{ r.id }}</td>
      <td>{{ r.name }}</td>
      <td>{{ r.capacity }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<hr>

<h2>Добавить тип занятия</h2>
<form action="/web/add_class_type" method="post">
  <label>Название:
    <input type="text" name="name" required>
  </label>
  <label>Длительность (мин):
    <input type="number" name="duration" value="60" min="15">
  </label>
  <button type="submit">Сохранить тип занятия</button>
</form>

<table>
  <thead>
    <tr>
      <th>ID</th><th>Название</th><th>Длительность (мин)</th>
    </tr>
  </thead>
  <tbody>
  {% for ct in class_types %}
    <tr>
      <td>{{ ct.id }}</td>
      <td>{{ ct.name }}</td>
      <td>{{ ct.duration_minutes }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<hr>

<h2>Добавить клиента</h2>
<form action="/web/add_client" method="post">
  <label>Имя:
    <input type="text" name="name" required>
  </label>
  <label>Email:
    <input type="email" name="email" required>
  </label>
  <button type="submit">Сохранить клиента</button>
</form>

<table>
  <thead>
    <tr>
      <th>ID</th><th>Имя</th><th>Email</th>
    </tr>
  </thead>
  <tbody>
  {% for c in clients %}
    <tr>
      <td>{{ c.id }}</td>
      <td>{{ c.name }}</td>
      <td>{{ c.email }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<hr>

<h2>Добавить занятие в расписание</h2>
<form action="/web/add_scheduled_class" method="post">
  <label>Тип занятия:
    <select name="class_type_id" required>
      <option value="">-- выберите --</option>
      {% for ct in class_types %}
        <option value="{{ ct.id }}">{{ ct.name }}</option>
      {% endfor %}
    </select>
  </label>

  <label>Тренер:
    <select name="trainer_id" required>
      <option value="">-- выберите --</option>
      {% for t in trainers %}
        <option value="{{ t.id }}">{{ t.name }}</option>
      {% endfor %}
    </select>
  </label>

  <label>Зал:
    <select name="room_id" required>
      <option value="">-- выберите --</option>
      {% for r in rooms %}
        <option value="{{ r.id }}">{{ r.name }}</option>
      {% endfor %}
    </select>
  </label>

  <label>Дата:
    <input type="date" name="date" required>
  </label>

  <label>Время начала:
    <input type="time" name="start_time" required>
  </label>

  <label>Длительность (мин):
    <input type="number" name="duration" value="60" min="15">
  </label>

  <label>Макс. записей:
    <input type="number" name="max_enrollment" value="20" min="1">
  </label>

  <button type="submit">Сохранить занятие</button>
</form>

<table>
  <thead>
    <tr>
      <th>ID</th><th>Тип</th><th>Тренер</th><th>Зал</th>
      <th>Начало</th><th>Конец</th><th>Записано</th>
    </tr>
  </thead>
  <tbody>
  {% for sc in scheduled_classes %}
    <tr>
      <td>{{ sc.id }}</td>
      <td>{{ sc.class_type_id }}</td>
      <td>{{ sc.trainer_id }}</td>
      <td>{{ sc.room_id }}</td>
      <td>{{ sc.start_time }}</td>
      <td>{{ sc.end_time }}</td>
      <td>{{ sc.current_enrollment }}/{{ sc.max_enrollment }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

</body>
</html>
